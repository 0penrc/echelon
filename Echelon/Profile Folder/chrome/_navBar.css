#navigator-toolbox {
  position: relative !important;
  border-bottom: 0 !important;
  -moz-window-dragging: drag !important;
}

#navigator-toolbox::after {
  content: '';
  display: inline-block;
  width: calc(100% - 2px);
  height: 1px;
  background-color: ThreeDShadow !important;
  position: absolute !important;
  left: 1px !important;
  bottom: 0 !important;
}

#nav-bar {
  background-color: transparent !important;
  background-image: linear-gradient(var(--toolbar-highlight-top) 15%, var(--toolbar-highlight-bottom)) !important;
  height: 38px !important;  
  box-shadow: none !important;
  border-top: 1px solid rgba(10%,10%,10%,.4) !important;
  border-left: 1px solid rgba(10%,10%,10%,.4) !important;
  border-right: 1px solid rgba(10%,10%,10%,.4) !important;
  border-top-left-radius: var(--toolbar-border-radius);
  border-top-right-radius: var(--toolbar-border-radius);
  margin-top: -1px !important;
  padding-right: 2px !important;
  padding-bottom: 1px !important;
  align-items: center !important;
}

/** TOOLBAR BUTTONS **/

#nav-bar .toolbarbutton-1:not(#back-button, #forward-button, #zoom-out-button, #zoom-in-button, #reload-button, #stop-button, #edit-controls > *, #PanelUI-menu-button, #appmenu-button, #new-tab-button),
toolbar .toolbaritem-combined-buttons {
  padding: 5px 2px !important;
}

toolbar .toolbarbutton-icon {
  padding: 0 !important;
  background-color: transparent !important;
}

toolbar .toolbarbutton-1:not(#back-button, #tabs-newtab-button, #reload-button, #stop-button, #appmenu-button, #new-tab-button) > .toolbarbutton-icon {
  width: 18px !important;
  height: 18px !important;
}

#nav-bar[mode="icons"] .toolbarbutton-1:not(#back-button, #forward-button, #alltabs-button, #new-tab-button, #reload-button, #stop-button, #PanelUI-menu-button, #appmenu-button, #new-tab-button) {
  width: 30px !important;
  height: 24px !important;
}

toolbar .toolbarbutton-1:not(#back-button, #forward-button, #PanelUI-menu-button, #tabs-newtab-button, #new-tab-button, #reload-button, #stop-button, #appmenu-button) {
  margin-inline: 3px !important;
}

toolbar .toolbarbutton-1:not(#PanelUI-menu-button, #tabs-newtab-button, #new-tab-button, #reload-button, #stop-button, #appmenu-button, #alltabs-button) {
  background: rgba(151,152,153,.05) linear-gradient(rgba(251,252,253,.95), rgba(246,247,248,.47) 49%, rgba(231,232,233,.45) 51%, rgba(225,226,229,.3));
  background-clip: padding-box;
  border-radius: var(--toolbarbutton-border-radius);
  border: 1px solid;
  border-color: rgba(0,0,0,.12) rgba(0,0,0,.19) rgba(0,0,0,.38);
  box-shadow: 0 0 0 1px rgba(255,255,255,.3) inset, 0 0 0 2px rgba(255,255,255,.1) inset, 0 1px 0 rgba(0,0,0,.15);
  color: black;
  text-shadow: 0 0 2px white;
  align-self: center !important;
  transition: background-color var(--toolbarbutton-transition-duration) var(--toolbarbutton-transition-timingfunction), 
              border-color var(--toolbarbutton-transition-duration) var(--toolbarbutton-transition-timingfunction), 
              box-shadow var(--toolbarbutton-transition-duration) var(--toolbarbutton-transition-timingfunction);
}

toolbar .toolbarbutton-1:not([open], [disabled="true"], #back-button, #new-tab-button, #tabs-newtab-button, #reload-button, #stop-button, #appmenu-button, #alltabs-button):hover {
  background-color: hsla(190,60%,70%,.5) !important;
  border-color: hsla(190,50%,65%,.8) hsla(190,50%,50%,.8) hsla(190,50%,40%,.8);
  box-shadow: 0 0 0 1px rgba(255,255,255,.3) inset, 0 0 0 1.5px rgba(255,255,255,.1) inset, 0 1px 0 rgba(0,0,0,.1), 0 0 3.5px hsl(190,90%,80%);
}

toolbar .toolbarbutton-1:not([disabled="true"], #back-button, #new-tab-button, #tabs-newtab-button, #reload-button, #stop-button, #appmenu-button, #alltabs-button):hover:active,
toolbar .toolbarbutton-1:not([disabled="true"], #back-button, #new-tab-button, #tabs-newtab-button, #alltabs-button)[open],
#forward-button:not([disabled="true"]):active {
  background-color: transparent !important;
  border-color: rgba(0,0,0,.65) rgba(0,0,0,.55) rgba(0,0,0,.5) !important;
  box-shadow: 0 0 6.5px rgba(0,0,0,.4) inset, 0 0 2px rgba(0,0,0,.4) inset, 0 1px 0 rgba(255,255,255,.4) !important;
  text-shadow: none !important;
}

.toolbarbutton-1:not(#reload-button, #stop-button)[disabled="true"] {
  opacity: 0.8 !important;
}

.toolbarbutton-1:not(#reload-button, #stop-button)[disabled="true"] .toolbarbutton-icon {
  opacity: 0.5 !important;
}

toolbar .toolbarbutton-1[open] {
  transition: none !important;
}

/* UNIFIED BACK & FORWARD BUTTONS */

#back-button {
  width: 30px !important;
  height: 30px !important;
  border-radius: 10000px !important;
  padding: 0 !important;
  border: none !important;
  background-image: linear-gradient(rgba(251,252,253,.97), rgba(246,247,248,.5) 49%, rgba(231,232,233,.45) 51%, rgba(225,226,229,.2)) !important;
  box-shadow: 0 0 0 1px rgba(255,255,255,.3) inset, 0 0 0 2px rgba(255,255,255,.1) inset, 0 0 0 1px rgba(0,0,0,.15), 0 1px 0 rgba(0,0,0,.4), 0 1px 1px rgba(0,0,0,.3), 1px 2px 1px rgba(0,0,0,.2) !important;
  padding: 0 !important;
  position: relative !important;
  z-index: 1 !important;
  margin-inline-start: 4px !important;
}

#back-button:not([disabled="true"], [open], :active):hover {
  background-color: hsla(190,60%,70%,.5) !important;
  box-shadow: 0 0 0 1px rgba(255,255,255,.3) inset, 0 0 0 2px rgba(255,255,255,.1) inset, 0 0 0 1px hsla(190,50%,40%,.3), 0 1px 0 rgba(0,0,0,.4), 0 1px 1px rgba(0,0,0,.3), 1px 2px 1px rgba(0,0,0,.2), 0 0 5px 1px hsl(190,90%,80%) !important;
}

#back-button:not([disabled="true"]):hover:active,
#back-button:not([disabled="true"])[open] {
  box-shadow: 0 0 6.5px rgba(0,0,0,.4) inset, 0 0 2px rgba(0,0,0,.4) inset, 0 0 0 1px rgba(0,0,0,.65), 0 2px 0 rgba(255,255,255,.4) !important;
}

#back-button .toolbarbutton-icon {
  width: 20px !important;
  height: 20px !important;
}

#forward-button {
  clip-path: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3CclipPath id='windows-keyhole-forward-clip-path' clipPathUnits='objectBoundingBox'%3E%3Cpath d='M 0,0 C 0.16,0.11 0.28,0.29 0.28,0.5 0.28,0.71 0.16,0.89 0,1 L 1,1 1,0 0,0 z'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E#windows-keyhole-forward-clip-path") !important;
  width: 28px !important;
  height: 24px !important;
  padding: 0 !important;
  margin-inline-start: -5px !important;
  border-top-right-radius: var(--toolbarbutton-border-radius) !important;
  border-bottom-right-radius: var(--toolbarbutton-border-radius) !important;
  border-top-left-radius: 0px !important;
  border-bottom-left-radius: 0px !important;
  border-left-style: none !important;
  background-image: linear-gradient(rgba(251,252,253,.97), rgba(246,247,248,.5) 49%, rgba(231,232,233,.45) 51%, rgba(225,226,229,.2)) !important;
}

#forward-button .toolbarbutton-icon {
  margin-inline-start: 2px !important;
}

/* COMBINED TOOLBAR BUTTONS */
/* ZOOM BUTTONS */
#zoom-controls > :not(#zoom-out-button, #zoom-in-button) {
  display: none !important;
}

#nav-bar #zoom-controls {
  margin: 0 !important;
}

toolbar .toolbaritem-combined-buttons {
  margin-inline: 0 !important;
}

toolbar .toolbaritem-combined-buttons separator {
  display: none !important;
}

toolbar .toolbaritem-combined-buttons > .toolbarbutton-combined:first-of-type .toolbarbutton-icon {
  border-top-right-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
  border-right: 0 !important;
}

toolbar .toolbaritem-combined-buttons > .toolbarbutton-combined:not(:first-of-type, :last-of-type) .toolbarbutton-icon {
  border-radius: 0 !important;
  border-right: 0 !important;
}

toolbar .toolbaritem-combined-buttons > .toolbarbutton-combined:last-of-type .toolbarbutton-icon {
  border-top-left-radius: 0 !important;
  border-bottom-left-radius: 0 !important;
}

/** HIDE PANEL UI **/
#PanelUI-menu-button {
  list-style-image: none !important;
  background-color: transparent !important;
  padding: 0 !important;
}

#PanelUI-menu-button .toolbarbutton-badge-stack {
  padding: 0 !important;
  background-color: transparent !important;
}

#PanelUI-menu-button .toolbarbutton-icon {
  width: 0 !important;
}